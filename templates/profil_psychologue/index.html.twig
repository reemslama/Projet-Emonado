{% extends 'base.html.twig' %}

{% block title %}Profil Psychologue{% endblock %}

{% block body %}
<div class="profile-container">
    <h2>Mon Profil</h2>

    {% for message in app.flashes('success') %}
        <div class="alert alert-success">{{ message }}</div>
    {% endfor %}

    {% if error %}
        <div class="alert alert-danger">{{ error }}</div>
    {% endif %}

    <form method="post" class="profile-form">
        <div>
            <label>Nom</label>
            <input type="text" name="nom" value="{{ user.nom }}" required>
        </div>
        <div>
            <label>Prénom</label>
            <input type="text" name="prenom" value="{{ user.prenom }}" required>
        </div>
        <div>
            <label>Email</label>
            <input type="email" value="{{ user.email }}" disabled>
        </div>
        <div>
            <label>Téléphone</label>
            <input type="tel" name="telephone" value="{{ user.telephone }}">
        </div>
        <div>
            <label>Spécialité</label>
            <input type="text" name="specialite" value="{{ user.specialite }}">
        </div>
        <div>
            <label>Mot de passe (laisser vide si inchangé)</label>
            <input type="password" name="password">
        </div>

        <div class="mt-3 d-flex gap-3">
            <button type="submit" name="action" value="update" class="btn btn-success">Mettre à jour</button>
            <a href="{{ path('app_logout') }}" class="btn btn-danger">Déconnexion</a>
            <button type="submit" name="action" value="delete" class="btn btn-warning" onclick="return confirm('Voulez-vous vraiment supprimer votre profil ?');">Supprimer le profil</button>
        </div>
    </form>
</div>

<style>
.profile-container {
    background-color: rgba(208, 232, 255, 0.27);
    border-radius: 25px;
    padding: 30px 20px;
    box-shadow: 0 8px 16px rgba(0,0,0,0.1);
    width: 100%;
    max-width: 500px;
    display: flex;
    flex-direction: column;
    align-items: center;
    margin: 0 auto;
}

.profile-form div {
    margin-bottom: 15px;
}

.profile-form label {
    display: block;
    font-weight: bold;
    margin-bottom: 5px;
}

.profile-form input {
    width: 100%;
    padding: 8px 10px;
    border-radius: 8px;
    border: 1px solid #ccc;
}

.mt-3 { margin-top: 15px; }
.d-flex { display: flex; }
.gap-3 { gap: 10px; }

.alert { text-align: center; }
</style>
{% endblock %}
