{% extends 'base.html.twig' %}

{% block title %}Connexion{% endblock %}

{% block body %}
<main class="login-container">
  <section class="login-wrapper">

    {% for message in app.flashes('success') %}
      <div class="alert alert-success">{{ message }}</div>
    {% endfor %}
    {% for message in app.flashes('info') %}
      <div class="alert alert-info">{{ message }}</div>
    {% endfor %}
    {% for message in app.flashes('error') %}
      <div class="alert alert-danger">{{ message }}</div>
    {% endfor %}

    {% if error %}
      <div class="alert alert-danger">{{ error.messageKey|trans(error.messageData, 'security') }}</div>
    {% endif %}

    <p class="text-muted small text-center mb-3">Connexion <strong>Patient</strong> ou <strong>Psychologue</strong></p>

    <form method="post" class="login-form">
      <div class="mb-3">
        <input type="email" name="email" class="form-control" placeholder="Email" required value="{{ last_username }}" autocomplete="email">
      </div>
      <div class="mb-3">
        <input type="password" name="password" class="form-control" placeholder="Mot de passe" required autocomplete="current-password">
      </div>
      <button type="submit" class="btn btn-success w-100 py-2">Se connecter</button>

      <div class="mb-3 text-center mt-2">
        <a href="{{ path('app_forgot_password') }}" class="small text-muted">Mot de passe oubli√© ?</a>
      </div>

      <input type="hidden" name="_csrf_token" value="{{ csrf_token('authenticate') }}">
    </form>

    <hr class="my-3">
    <p class="small text-center mb-0">
      <a href="{{ path('admin_login') }}" class="text-muted">Espace administrateur</a>
    </p>
  </section>
</main>

<style>
body {
    background-color: #f8f8f8;
}
.login-container {
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
    padding: 20px;
}
.login-wrapper {
    background-color: rgba(221, 245, 131, 0.27);
    border-radius: 25px;
    padding: 30px 20px;
    box-shadow: 0 8px 16px rgba(0,0,0,0.1);
    width: 100%;
    max-width: 400px;
    display: flex;
    flex-direction: column;
    align-items: center;
}
.login-form {
    display: flex;
    flex-direction: column;
    gap: 20px;
    width: 100%;
}
.btn-success { border-radius: 22px; font-weight: 600; }
</style>
{% endblock %}